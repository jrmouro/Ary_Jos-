<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css"  href="/stylesheets/style.css">
  <script src="/javascripts/chatroom.js"></script>
</head>

<body style="font-family:Verdana;color:#05252c;" onload="chatroom()">

  <div style="background-color:#90b1df;padding:5px;text-align:center;">
    <h2><%= title %></h2>
    <p style="font-size:50%;"><%= wsa %>:<%= wsp %></p>
    <% if (fail_msg != undefined) { %>
      <p style="font-family:Verdana;color:#e10e1c;"> <%= fail_msg%> </p>
    <%}%>
  </div>

  <div  style="overflow:auto;background-color:#90b1df;margin-top:7px;">

    <div class="left" style="background-color:#90b1df">
      <h3><%= user_quizzes[quiz_key].name %></h3>
      <h4><%= user_quizzes[quiz_key].theme %></h4>
      <h4">Questions</h4>
      <ul>
        <li> 
          <Div>
            <a href= <%= "/question_register_form?quiz_key=" + quiz_key %>> New... </a>
          </Div>            
        </li>
        <% if (user_quizzes != undefined && quiz_key in user_quizzes) { %>
          <% for (const question_key in user_quizzes[quiz_key].questions) { %>
            <li> 
              <Div>
                <p style="font-size:75%;margin-top: 0.0em ; margin-bottom: 0.0em ;"> <%= user_quizzes[quiz_key].questions[question_key].description %>  <a href= <%= "/question_edit_form?quiz_key=" + quiz_key + "&question_key=" + question_key %> style="text-decoration: none;"> &#9998 </a></p>
                <ul style="list-style-type: none;margin: 0;padding: 0;">
                  <li>
                    <p style="font-size:50%;margin-top: 0.0em ; margin-bottom: 0.0em ;">True Option:  <%= user_quizzes[quiz_key].questions[question_key].true_option %> </p>
                  </li>
                  <% for(var i=0; i < user_quizzes[quiz_key].questions[question_key].fake_options.length; i++) {%>
                    <li>
                      <p style="font-size:50%;margin-top: 0.0em ; margin-bottom: 0.0em; color:#e10e1c;"> Fake Option<%= i + 1 %> :  <%= user_quizzes[quiz_key].questions[question_key].fake_options[i] %> </p>
                    </li>                    
                  <% } %>
                </ul>                
              </Div>                
            </li>
          <% } %>
        <% } %>
      </ul> 
    </div>

    <div class="forms" style="background-color:#90b1df">



      <h3>Edit Question</h3>
      <form id="quiz_register" action=<%= "/question_edit?quiz_key=" + quiz_key + "&question_key=" + question_key%> method="get">
        <input id="quiz_key" name="quiz_key" type="hidden" value= <%= quiz_key %> >
        <input id="question_key" name="question_key" type="hidden" value= <%= question_key %> >
        <textarea id="description" name="description" placeholder="question description" style="width:50%; margin: 2px" required autofocus><%= user_quizzes[quiz_key].questions[question_key].description %></textarea><br>
        <textarea id="true_option" name="true_option" placeholder="true option" style="width:50%; margin: 2px" required><%= user_quizzes[quiz_key].questions[question_key].true_option %></textarea><br>
       
        <% if(user_quizzes[quiz_key].questions[question_key].fake_options.length > 0){ %>

          <textarea id="fake_option1" name="fake_option1" placeholder="fake option1" style="width:50%; margin: 2px" required><%= user_quizzes[quiz_key].questions[question_key].fake_options[0] %></textarea><br>

        <% } %>

        <% if(user_quizzes[quiz_key].questions[question_key].fake_options.length > 1){ %>

          <textarea id="fake_option2" name="fake_option2" placeholder="fake option2" style="width:50%; margin: 2px"><%= user_quizzes[quiz_key].questions[question_key].fake_options[1] %></textarea><br>

        <% } else {%>

          <textarea id="fake_option2" name="fake_option2" placeholder="fake option2" style="width:50%; margin: 2px"></textarea><br>

        <% } %>

        <% if(user_quizzes[quiz_key].questions[question_key].fake_options.length > 2){ %>

          <textarea id="fake_option3" name="fake_option3" placeholder="fake option3" style="width:50%; margin: 2px"><%= user_quizzes[quiz_key].questions[question_key].fake_options[2] %></textarea><br>

        <% } else {%>

          <textarea id="fake_option3" name="fake_option3" placeholder="fake option3" style="width:50%; margin: 2px"></textarea><br>

        <% } %>

        <button id="register_btn" type="submit" style="width:50%; margin: 5px">Register</button>
      </form>
    </div>

    <div class="left"></div>
    
  </div>

  <div id="status" style="background-color:#90b1df;text-align:center;padding:5px;margin-top:7px;">
    <% if (user != undefined) { %>
    <p> <%= user.name %> </p>
    <p style="font-size:50%;"> <%= user.email %> </p>
    <a href="/user_logout"> logout </a>
    <a href="/quiz_view"> back </a>
    <%} else { %>
    <a href="/user_login_form"> login </a>
    <% } %>
  </div>

</body>

</html>